// Set imageurl to the path where the nubbin.png image is located

var imageurl = "";

jQuery(document).ready(function(){
			
	var mouseX = 0;
	var mouseY = 0;
	jQuery().mousemove( function(e) {
		mouseX = e.pageX; 
		mouseY = e.pageY;
	});
	 
	jQuery(".jttip").hover(
		function () {
			id = jQuery(this).attr('id');
			
			split = id.split('-', 2)
			number = split[1];
			
			clearTimeout(window['ta' + number]);
			jQuery('#'+id).show();

			
		}, 
		function () {
			
			id = jQuery(this).attr('id');
			jQuery('#'+id).fadeOut('fast');
			
		}
	);
	 
	jQuery(".jttip").each(function (i) {
		var prependjQueryjQueryi = 0;
		
		jQuery("#jttrigger-"+i).hover(
	      function () {
			
			if(prependjQueryjQueryi == 0)
			{
				jQuery("#jttip-"+i).prepend('<img class="nubbin" src="'+imageurl+'nubbin.png" alt="arrow" height="13" width="27">');
				prependjQueryjQueryi = "done";
			}
			
			var triggerPos = jQuery("#jttrigger-"+i).position();
			var jttipPos = jQuery("#jttip-"+i).position();
			var triggerHeight = jQuery("#jttrigger-"+i).height();
			var triggerWidth = jQuery("#jttrigger-"+i).width();
			
	      	var jttipWidth = jQuery("#jttip-"+i).width();
	      	
	      	var offsetX = triggerWidth-jttipWidth;
	      	
	      	jQuery("#jttip-"+i).css('top',triggerPos.top+triggerHeight);
	      	
	      	if(offsetX > 0)
	      	{
	      		jQuery("#jttip-"+i).css('left',triggerPos.left-(offsetX/2));
	      	}
	      	else
	      	{
	      		jQuery("#jttip-"+i).css('left',triggerPos.left+(offsetX/2));
	      	}
	      	
	      	window['t' + i] = setTimeout(function() { jQuery("#jttip-"+i).fadeIn('fast'); },300);
	        
	      }, 
	      function () {
				
				clearTimeout(window['t' + i]);

				if(jQuery("#jttip-"+i).css("display") == 'block')
				{
					window['ta' + i] = setTimeout(function() { jQuery("#jttip-"+i).hide(); },300);
				}

	      });
	      
		});
	
});